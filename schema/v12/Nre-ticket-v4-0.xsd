<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns="http://nationalrail.co.uk/xml/ticket" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            xmlns:com="http://nationalrail.co.uk/xml/common"
            targetNamespace="http://nationalrail.co.uk/xml/ticket" elementFormDefault="qualified"
            attributeFormDefault="unqualified" version="4.0" id="nre-ticket">
    <xsd:annotation>
        <xsd:documentation>The National Rail Enquiries Ticket Type Description Schema</xsd:documentation>
        <xsd:appinfo>
            <Metadata xmlns="http://www.govtalk.gov.uk/metadata/egms">
                <Contributor Role="developer" Href="mailto:geoff.parkin@cds.co.uk">Geoff Parkin</Contributor>
                <Contributor Role="developer">Neil Fursey</Contributor>
                <Contributor Role="client" Href="mailto:nre@nationalrail.co.uk">NRE</Contributor>
                <Creator>NRE</Creator>
                <Created>2013-07-01</Created>
                <Modified>2014-03-24</Modified>
                <Description>The National Rail Enquiries (NRE) Ticket Type Descriptions XML Schema provides narrative
                    descriptiosn for UK Ticket types.
                    Content includes information about:
                    <ul>
                        <li>Avalability.</li>
                        <li>Usage.</li>
                    </ul>
                    <p>The Schema is designed to be used in conjunction with the NRE XML Train Company schema.</p>
                </Description>
                <Format Scheme="http://www.iana.org/assignments/media-types/">text/xml</Format>
                <Identifier Href="http://kb.nationalrail.co.uk/schemas/NreTicketTypeDescriptionSchema">
                    NreTicketTypeDescriptionSchema
                </Identifier>
                <Language codeListID="ISO639-2">eng</Language>
                <Publisher Href="mailto:nre@nationalrail.co.uk">National Rail Enquiries, 40 Bernard Street, London WC1N
                    1BY
                </Publisher>
                <ConformsTo>http://www.w3.org/2001/XMLSchema</ConformsTo>
                <HasPart>nre-common-v4-0.xsd</HasPart>
                <ProvidesDefinitionOf Namespace="http://nationalrail.co.uk/xml/ticket">TicketTypeDescriptionStructure
                </ProvidesDefinitionOf>
                <ProvidesDefinitionOf Namespace="http://nationalrail.co.uk/xml/ticket">ApplicableTocsStructure
                </ProvidesDefinitionOf>
                <ProvidesDefinitionOf Namespace="http://nationalrail.co.uk/xml/ticket">ValidityStructure
                </ProvidesDefinitionOf>
                <ProvidesDefinitionOf Namespace="http://nationalrail.co.uk/xml/ticket">BreakOfJourneyStructure
                </ProvidesDefinitionOf>
                <ProvidesDefinitionOf Namespace="http://nationalrail.co.uk/xml/ticket">DiscountStructure
                </ProvidesDefinitionOf>
                <ProvidesDefinitionOf Namespace="http://nationalrail.co.uk/xml/ticket">DiscountDetailStructure
                </ProvidesDefinitionOf>
                <ProvidesDefinitionOf Namespace="http://nationalrail.co.uk/xml/ticket">TicketIdentifierType
                </ProvidesDefinitionOf>
                <ProvidesDefinitionOf Namespace="http://nationalrail.co.uk/xml/ticket">FareCategoryEnumeration
                </ProvidesDefinitionOf>
                <ProvidesDefinitionOf Namespace="http://nationalrail.co.uk/xml/ticket">ClassEnumeration
                </ProvidesDefinitionOf>
                <ProvidesDefinitionOf Namespace="http://nationalrail.co.uk/xml/ticket">SingleReturnEnumeration
                </ProvidesDefinitionOf>
                <Copyright href="http://www.opsi.gov.uk/advice/crown-copyright/index.htm">National Rail Enquiries, 2003,
                    2004
                </Copyright>
                <ProtectiveMarking>unclassified</ProtectiveMarking>
                <Status>Draft</Status>
                <StatusDescription>Initial release for consultation</StatusDescription>
                <Category codeListID="">
                    Arts, recreation and travel, Tourism, Travel (tourism), Transport,
                    Rail transport, Infrastructure (railways), Railway stations and track,
                    Train services, Underground trains, Parking, Taxis,
                    Access for disabled people, Mobility for the disabled.
                </Category>
                <Version>4.0</Version>
                <Project>National Rail Enquiries Knowledgebase</Project>
                <Title>NRE Ticket Type Description XML Schema, a schema to provide narrative descriptions for UK Ticket
                    Types.
                </Title>
                <Type>message</Type>
            </Metadata>
        </xsd:appinfo>
    </xsd:annotation>
    <xsd:import namespace="http://nationalrail.co.uk/xml/common" schemaLocation="nre-common-v4-0.xsd">
        <xsd:annotation>
            <xsd:documentation>
                A com set of types for NRE schemas.
            </xsd:documentation>
        </xsd:annotation>
    </xsd:import>
    <!-- ======================================================================= -->
    <!-- Root element -->
    <xsd:element name="TicketTypeDescriptionList">
        <xsd:annotation>
            <xsd:documentation>A list of ticket types.</xsd:documentation>
        </xsd:annotation>
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element ref="TicketTypeDescription" minOccurs="0" maxOccurs="unbounded">
                    <xsd:annotation>
                        <xsd:documentation>Details of a ticket type as required for the NRE Knowledge Base.
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
    <xsd:element name="TicketTypeDescription" type="TicketTypeDescriptionStructure">
        <xsd:annotation>
            <xsd:documentation>Details of a ticket type as required for the NRE Knowledge Base.</xsd:documentation>
        </xsd:annotation>
    </xsd:element>
    <!-- ======================================================================= -->
    <!-- Complex types -->
    <xsd:complexType name="TicketTypeDescriptionStructure">
        <xsd:annotation>
            <xsd:documentation>Type for a TicketDescription</xsd:documentation>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="TicketTypeIdentifier" type="TicketIdentifierType">
                <xsd:annotation>
                    <xsd:documentation>Three character code identifying a Ticket Type</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="TicketTypeCode" type="com:TicketTypeCodeType" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>Three character code identifying a Ticket Type</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="TicketTypeName" type="xsd:string">
                <xsd:annotation>
                    <xsd:documentation>The name of the ticket type.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="Description" type="xsd:string">
                <xsd:annotation>
                    <xsd:documentation>The description of the ticket type.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="Class" type="ClassEnumeration">
                <xsd:annotation>
                    <xsd:documentation>The Class of the ticket.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="SingleReturn" type="SingleReturnEnumeration">
                <xsd:annotation>
                    <xsd:documentation/>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="ApplicableTocs" type="ApplicableTocsStructure" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>The TOCS who support the ticket.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="Validity" type="ValidityStructure" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>When is the ticket type valid to use.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="BreakOfJourney" type="BreakOfJourneyStructure" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>Breaks in journey that are allowed for by the ticket type.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="FareCategory" type="FareCategoryEnumeration">
                <xsd:annotation>
                    <xsd:documentation>Information about the Fare Category applicable to the ticket type
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="Conditions" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>Any conditions that apply to use the ticket type.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="Availability" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>When the ticket type is avaliable to purchase.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="Retailing" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>Information regarding retailing for the ticket type.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="BookingDeadlines" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>Any deadlines for purchasing the ticket type.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="CompulsoryReservations" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>Is it compulsory to make a reservation.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="ChangesToTravelPlans" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>Changes of travel plans allowed for by the ticket type.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="Refunds" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>Refund rules for the ticket type.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="Discount" type="DiscountStructure" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>Refund rules for the ticket type.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="SpecialConditions" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation/>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>

    <!--New ComplexTypes added v4-0-->
    <xsd:complexType name="ApplicableTocsStructure">
        <xsd:sequence>
            <xsd:choice>
                <xsd:element name="IncludedTocs" type="com:AtocListStructure" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>The ticket type is valid for the specified TOCS.</xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="ExcludedTocs" type="com:AtocListStructure" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>The ticket type is valid for all TOCs except these.</xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
            </xsd:choice>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:complexType name="ValidityStructure">
        <xsd:sequence>
            <xsd:element name="DayOutward" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation/>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="DayReturn" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation/>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="TimeOutward" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation/>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="TimeReturn" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation/>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:complexType name="BreakOfJourneyStructure">
        <xsd:sequence>
            <xsd:element name="OutwardNote" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation/>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="ReturnNote" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation/>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:complexType name="DiscountStructure">
        <xsd:sequence>
            <xsd:element name="Child" type="DiscountDetailStructure" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation/>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="RailCard" type="DiscountDetailStructure" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation/>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="Group" type="DiscountDetailStructure" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation/>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:complexType name="DiscountDetailStructure">
        <xsd:sequence>
            <xsd:element name="Permitted" type="xsd:boolean" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation/>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="Note" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation/>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <!-- ======================================================================= -->
    <!--  Enumerations -->
    <xsd:simpleType name="FareCategoryEnumeration">
        <xsd:annotation>
            <xsd:documentation>Fare category types.</xsd:documentation>
        </xsd:annotation>
        <xsd:restriction base="xsd:NMTOKEN">
            <xsd:enumeration value="open"/>
            <xsd:enumeration value="flexible"/>
            <xsd:enumeration value="restricted"/>
        </xsd:restriction>
    </xsd:simpleType>
    <!--New Enumerations added v4-0-->
    <xsd:simpleType name="ClassEnumeration">
        <xsd:annotation>
            <xsd:documentation/>
        </xsd:annotation>
        <xsd:restriction base="xsd:NMTOKEN">
            <xsd:enumeration value="First"/>
            <xsd:enumeration value="Standard"/>
            <xsd:enumeration value="Other"/>
        </xsd:restriction>
    </xsd:simpleType>
    <xsd:simpleType name="SingleReturnEnumeration">
        <xsd:annotation>
            <xsd:documentation>Fare category types.</xsd:documentation>
        </xsd:annotation>
        <xsd:restriction base="xsd:NMTOKEN">
            <xsd:enumeration value="Single"/>
            <xsd:enumeration value="Return"/>
        </xsd:restriction>
    </xsd:simpleType>
    <!-- ======================================================================= -->
    <!-- Simple types -->
    <!--New SimpleTypes added v4-0-->
    <xsd:simpleType name="TicketIdentifierType">
        <xsd:annotation>
            <xsd:documentation/>
        </xsd:annotation>
        <xsd:restriction base="xsd:NMTOKEN">
            <xsd:pattern value="[A-Z0-9]{32}"/>
        </xsd:restriction>
    </xsd:simpleType>
</xsd:schema>
